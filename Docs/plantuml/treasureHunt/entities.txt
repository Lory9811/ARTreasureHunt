@startuml

!include ../common/UnityEngine.iuml
!include ../common/Vuforia.iuml

package "TreasureHunt" {
	+class TreasureHunt {
		+LoadHunt(huntId: string, server: GameServer)
		-server: GameServer
	}

	-class Treasure {
		+Treasure(descriptor, server, callback)
		-hint: string
	}
	
	-class TrackedImageBehaviour {
		+SetDetectionCallback(callback)
		#HandleTargetStatusChanged(previous: Status, new: Status)
	}
	
	TreasureHunt "1" o-- "*" Treasure
	Treasure --> TrackedImageBehaviour
	Treasure --> ImageTargetBehaviour
}

abstract GameServer {
	{abstract} +GetHuntDescriptorLocation(id: string): string
	{abstract} +GetImageLocation(url: string): string
	{abstract} +GetHintLocation(url: string): string
}

class LocalServer

class RemoteServer

class Minigame {
	+Activate()
}

class GameManager <<singleton>> {
	+StartChallenge(level: int)
	-currentTreasure: int
}

GameObject <|-- GameManager
GameServer <|-- LocalServer
GameServer <|-- RemoteServer

GameManager --> Minigame
GameManager --> SceneManager
GameManager --> GameServer
GameManager --> TreasureHunt

DefaultObserverEventHandler <|-- TrackedImageBehaviour 

@enduml
